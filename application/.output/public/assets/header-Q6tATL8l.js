import{q as we,T as U,v as xe,w as ge,x as C,c as L,a as me,g as b,f as m,i as u,h as v,L as T,n as ve,S as Y,r as S,F as J,j as M,k as K,s as $e,o as _e,t as x,p as ye}from"./main-CXeWjMn0.js";function Q(e){if(Array.isArray(e))return e.flatMap(f=>Q(f));if(typeof e!="string")return[];const n=[];let t=0,o,a,i,r,s;const d=()=>{for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length},c=()=>(a=e.charAt(t),a!=="="&&a!==";"&&a!==",");for(;t<e.length;){for(o=t,s=!1;d();)if(a=e.charAt(t),a===","){for(i=t,t+=1,d(),r=t;t<e.length&&c();)t+=1;t<e.length&&e.charAt(t)==="="?(s=!0,t=r,n.push(e.slice(o,i)),o=t):t=i+1}else t+=1;(!s||t>=e.length)&&n.push(e.slice(o))}return n}function Se(e){return e instanceof Headers?e:Array.isArray(e)?new Headers(e):typeof e=="object"?new Headers(e):null}function Ce(...e){return e.reduce((n,t)=>{const o=Se(t);if(!o)return n;for(const[a,i]of o.entries())a==="set-cookie"?Q(i).forEach(s=>n.append("set-cookie",s)):n.set(a,i);return n},new Headers)}const X=()=>{throw new Error("createServerOnlyFn() functions can only be called on the server!")};function W(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"}function E(e,n){const t=Object.create(null);if(e)for(const o of Object.keys(e))W(o)&&(t[o]=e[o]);if(n&&typeof n=="object")for(const o of Object.keys(n))W(o)&&(t[o]=n[o]);return t}function Z(e){return Object.create(null)}const w=(e,n)=>{const t=n||e||{};return typeof t.method>"u"&&(t.method="GET"),Object.assign(i=>{const r={...t,...i};return w(void 0,r)},{options:t,middleware:i=>{const r=[...t.middleware||[]];i.map(c=>{U in c?c.options.middleware&&r.push(...c.options.middleware):r.push(c)});const s={...t,middleware:r},d=w(void 0,s);return d[U]=!0,d},inputValidator:i=>{const r={...t,inputValidator:i};return w(void 0,r)},handler:(...i)=>{const[r,s]=i,d={...t,extractedFn:r,serverFn:s},c=[...d.middleware||[],Fe(d)];return Object.assign(async f=>{const l=await D(c,"client",{...r,...d,data:f?.data,headers:f?.headers,signal:f?.signal,fetch:f?.fetch,context:Z()}),h=we(l.error);if(h)throw h;if(l.error)throw l.error;return l.result},{...r,__executeServer:async(f,l)=>{const h=X(),p=h.contextAfterGlobalMiddlewares,_={...r,...f,serverFnMeta:r.serverFnMeta,context:E(p,f.context),signal:l,request:h.request};return await D(c,"server",_).then($=>({result:$.result,error:$.error,context:$.sendContext}))}})}})};async function D(e,n,t){const o=xe()?.functionMiddleware||[];let a=Me([...o,...e]);if(n==="server"){const r=X();r?.executedRequestMiddlewares&&(a=a.filter(s=>!r.executedRequestMiddlewares.has(s)))}const i=async r=>{const s=a.shift();if(!s)return r;try{"inputValidator"in s.options&&s.options.inputValidator&&n==="server"&&(r.data=await Oe(s.options.inputValidator,r.data));let d;if(n==="client"?"client"in s.options&&(d=s.options.client):"server"in s.options&&(d=s.options.server),d){const f=await d({...r,next:async(l={})=>{const h={...r,...l,context:E(r.context,l.context),sendContext:E(r.sendContext,l.sendContext),headers:Ce(r.headers,l.headers),_callSiteFetch:r._callSiteFetch,fetch:r._callSiteFetch??l.fetch??r.fetch,result:l.result!==void 0?l.result:l instanceof Response?l:r.result,error:l.error??r.error},p=await i(h);if(p.error)throw p.error;return p}});if(ge(f))return{...r,error:f};if(f instanceof Response)return{...r,result:f};if(!f)throw new Error("User middleware returned undefined. You must call next() or return a result in your middlewares.");return f}return i(r)}catch(d){return{...r,error:d}}};return i({...t,headers:t.headers||{},sendContext:t.sendContext||{},context:t.context||Z(),_callSiteFetch:t.fetch})}function Me(e,n=100){const t=new Set,o=[],a=(i,r)=>{if(r>n)throw new Error(`Middleware nesting depth exceeded maximum of ${n}. Check for circular references.`);i.forEach(s=>{s.options.middleware&&a(s.options.middleware,r+1),t.has(s)||(t.add(s),o.push(s))})};return a(e,0),o}async function Oe(e,n){if(e==null)return{};if("~standard"in e){const t=await e["~standard"].validate(n);if(t.issues)throw new Error(JSON.stringify(t.issues,void 0,2));return t.value}if("parse"in e)return e.parse(n);if(typeof e=="function")return e(n);throw new Error("Invalid validator type!")}function Fe(e){return{"~types":void 0,options:{inputValidator:e.inputValidator,client:async({next:n,sendContext:t,fetch:o,...a})=>{const i={...a,context:t,fetch:o},r=await e.extractedFn?.(i);return n(r)},server:async({next:n,...t})=>{const o=await e.serverFn?.(t);return n({...t,result:o})}}}}const Pe=w({method:"POST"}).handler(C("95e928ba95487362d6afff6ca4d515806e7e351fbe6afa5f24801262b3067845")),qe=w({method:"POST"}).handler(C("129631420af401c96c262730d653c85520c7f45abbe9f9f1a0c226afe377ba96")),ze=w({method:"POST"}).handler(C("5cf45770ffbf97d3683ac5adc5168882f2e630c097070095eaae54df0a1c213d")),Be=w({method:"POST"}).handler(C("1108d962036347ce5bf840bba29e0af741ec3c05516bd6276164d3217127b51f")),Ge=w({method:"POST"}).handler(C("4180547286fb2de3eb3b3ca5e12fd7958423f6106b062ea5571396a6374ce00d"));var ke=x("<span class=text-3xl>♛"),je=x('<h1 class="text-2xl font-black tracking-tighter uppercase hidden sm:block">Chess<span class=text-indigo-500>Master'),Te=x('<div class="fixed inset-0 z-10 cursor-default">'),Ee=x('<div class="absolute right-0 mt-2 w-56 bg-stone-800 rounded-xl shadow-xl border border-stone-700 z-20 overflow-hidden animate-in fade-in zoom-in-95 duration-100 origin-top-right"><div class="max-h-[80vh] overflow-y-auto py-1"><!$><!/><div class="p-2 border-t border-stone-700"><button><span>∞</span> Unlimited'),Re=x('<div class=relative><button class="flex items-center gap-2 bg-stone-800 hover:bg-stone-700 text-stone-200 text-sm font-bold py-2 pl-4 pr-3 rounded-lg border border-stone-700 hover:border-indigo-500 transition-all focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[100px] justify-between"><span></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button><!$><!/>'),Ae=x('<header class="bg-stone-900 text-white shadow-md px-6 py-3 sticky top-0 z-50 flex items-center justify-between"><!$><!/><div class="flex items-center justify-center flex-1"><div class="bg-stone-800 p-1 rounded-lg flex items-center shadow-inner"><!$><!/><!$><!/></div></div><div class="flex items-center gap-3 justify-end w-1/4"><!$><!/><button type=button class="bg-stone-100 hover:bg-white text-stone-900 font-bold py-2 px-4 rounded-lg transition-all uppercase tracking-wider text-xs border border-stone-200 shadow-lg disabled:opacity-50 hover:scale-105 active:scale-95">'),Ne=x('<div class=p-2><div class="text-xs font-bold text-stone-500 uppercase tracking-wider px-2 mb-1"></div><div class="grid grid-cols-2 gap-1">'),Ve=x("<button><!$><!/> min");const Ie=e=>{const[n,t]=L(!1),[o,a]=L(10);me(()=>{e.currentTimeControl!==void 0&&a(e.currentTimeControl)});const i=[{label:"Bullet",options:[1]},{label:"Blitz",options:[3,5]},{label:"Rapid",options:[10,30]},{label:"Tournament",options:[60]}],r=c=>{a(c),t(!1)},s=()=>e.activeMode||"vs_player",d=c=>{c.stopPropagation(),t(!n())};return(()=>{var c=b(Ae),f=c.firstChild,[l,h]=m(f.nextSibling),p=l.nextSibling,_=p.firstChild,R=_.firstChild,[$,ee]=m(R.nextSibling),te=$.nextSibling,[re,ne]=m(te.nextSibling),A=p.nextSibling,se=A.firstChild,[N,oe]=m(se.nextSibling),O=N.nextSibling;return u(c,v(T,{to:"/",class:"flex items-center gap-3 w-1/4 hover:opacity-90 transition-opacity",get children(){return[b(ke),b(je)]}}),l,h),u(_,v(T,{to:"/computer",get class(){return`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${s()==="vs_computer"?"bg-indigo-600 text-white shadow-md":"text-stone-400 hover:text-stone-200"}`},children:"Vs Computer"}),$,ee),u(_,v(T,{to:"/",get class(){return`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${s()==="vs_player"?"bg-indigo-600 text-white shadow-md":"text-stone-400 hover:text-stone-200"}`},children:"Vs Player"}),re,ne),u(A,v(Y,{get when(){return s()!=="vs_computer"},get children(){var F=b(Re),k=F.firstChild,V=k.firstChild,ie=V.nextSibling,ae=k.nextSibling,[le,de]=m(ae.nextSibling);return k.$$click=d,u(V,(()=>{var g=ve(()=>o()===0);return()=>g()?"∞ Unlimited":`${o()} min`})()),u(F,v(Y,{get when(){return n()},get children(){return[(()=>{var g=b(Te);return g.$$click=()=>t(!1),S(),g})(),(()=>{var g=b(Ee),H=g.firstChild,ce=H.firstChild,[P,fe]=m(ce.nextSibling),ue=P.nextSibling,q=ue.firstChild;return u(H,v(J,{each:i,children:z=>(()=>{var B=b(Ne),G=B.firstChild,he=G.nextSibling;return u(G,()=>z.label),u(he,v(J,{get each(){return z.options},children:j=>(()=>{var y=b(Ve),pe=y.firstChild,[I,be]=m(pe.nextSibling);return I.nextSibling,y.$$click=()=>r(j),u(y,j,I,be),M(()=>K(y,`text-sm font-bold py-2 px-3 rounded-md transition-colors text-center ${o()===j?"bg-indigo-600 text-white":"text-stone-300 hover:bg-stone-700 hover:text-white"}`)),S(),y})()})),B})()}),P,fe),q.$$click=()=>r(0),M(()=>K(q,`w-full text-sm font-bold py-2 px-3 rounded-md transition-colors flex items-center justify-center gap-2 ${o()===0?"bg-indigo-600 text-white":"text-stone-300 hover:bg-stone-700 hover:text-white"}`)),S(),g})()]}}),le,de),M(()=>$e(ie,"class",`w-4 h-4 transition-transform ${n()?"rotate-180":""}`)),S(),F}}),N,oe),O.$$click=()=>e.onRestart?.({mode:s(),timeControl:s()==="vs_computer"?0:o()}),u(O,()=>e.isRestarting?"Starting...":"New Game"),M(()=>_e(O,"disabled",e.isRestarting)),S(),c})()};ye(["click"]);export{Ie as H,qe as a,Pe as g,Be as m,Ge as r,ze as u};
